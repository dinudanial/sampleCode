<?php

class Admin_CountryController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()

    {
   
       $Country= new admin_Model_CountryDao();
       $Result= $Country->getAllCountries();
       $arr=array("Country"=>$Result);
       $this->view->assign($arr);
       
    }
    
    public function addcountryAction()
    {
    	$form= new admin_Form_CountryAdd;
        $msg	= '';
     	if ($this->_request->isPost()) {
            $formData = $this->_request->getPost();
            if ($form->isValid($formData)) {
 				$country	=	new admin_Model_CountryDao();
 				$resultflag	=	$country->isCountryExists('test','1');
 				//$resultflag	=	$country->isCountryExists($formData['name'],$formData['id']);//check country already exists or not
 				if(!$resultflag){
 					$id	=	1;
 					$result		= $country->edit($formData,$id);//update query
 					if($result)
 						$msg	= "Succesfully updated!";
 					else 	
 						$msg 	= "Updation failed!";
 				}
 				else{
 					$msg		= "Country name already exists!";
 				}
            } else {
                $form->populate($formData);
            }
         }
        $array	= array('message'=>$msg);
        $this->view->assign($array);
        $this->view->form = $form;

    }
    
}









