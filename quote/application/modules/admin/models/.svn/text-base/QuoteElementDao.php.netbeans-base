<?php

class admin_Model_QuoteElementDao extends Zend_Db_Table_Abstract{
    
    protected $_name = 'QuoteElement';
    protected $_primary = 'ID_QuoteElement';
    
    public function addNewQuoteElement(array $quoteElementData){
        try{
            $quoteElement = $this->insert($quoteElementData);
            return true;
        }catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    }
    
    public function getQuoteElement($quoteId){
        
    }
    
    public function deletQuoteElement($quoteId){
        
    }
    
    public function editQuoteElement($quoteId){
        
    }
    
    public function find($quoteId){
        try{
            $select = $this->select()
               ->from($this, array('ID_QuoteElement'
                   ))
               -> join('Country', 'Country.ID_Country = QuoteElement.ID_Country', array('Country.d__CountryName','Country.d__Applicable_Admitted'))
               ->setIntegrityCheck(false)
               ->where('QuoteElement.ID_Quote = ?', $quoteId)
               ->where('QuoteElement.ID_QuoteInsurer_Checksum = ?', 1);
            $stmt = $select->query();
            $rows = $stmt->fetchAll();
            if (count($rows) > 0){
                return $rows;
            }
            else
                return false;
        }catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    }
}

?>
