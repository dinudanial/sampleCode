<?php
class admin_Model_WebnewsDao extends Zend_Db_Table_Abstract {
	protected $_name = 'News';
    protected $_primary = 'ID_News';
    
    public function getNews(){
    	try{
	    	$select	=	$this->select()
                                ->from($this,array('d__Content','d__Headline','s__CreationAccount','s__ModificationAccount',
                                                    'ID_News','d__Date','s__CreationTimestamp','s__ModificationTimestamp'))
                                ->order('d__Date desc');
	    	$stmt = $select->query();
	        $rows = $stmt->fetchAll();
	        if (count($rows) > 0){
	        	return $rows;
	        }
	        else
	        	return false;
    	}catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    							
    }
    //function for webnews exists checking
    public function isExists(){
    	
    }
    
    public function saveNews(array $newsDetails){
    	try {
            $result = $this->insert($newsDetails);
            return true;
        } catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    }
    
	public function editNews(array $newsDetails){
	 try {
            $where['ID_News = ?'] = $newsDetails['ID_News'];
            $this->update($newsDetails,$where);
            return true;
        } catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    }
    
   public function findNews($newsId){
   	try{
	    	$select	=	$this->select()
	    				->from($this,array('d__Content','d__Headline','s__CreationAccount','s__ModificationAccount',
	    							'ID_News','d__Date','s__CreationTimestamp','s__ModificationTimestamp'));
	    	
	    	$select->where('ID_News = ?',$newsId);
	    	$stmt = $select->query();
	        $rows = $stmt->fetchAll();
	        if (count($rows) > 0){
	        	return $rows;
	        }
	        else
	        	return false;
    	}catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
   }
   
  public function deleteNews($newsId){
  	try{
  		$where['ID_News = ?']= $newsId;
  		$this->delete($where);
  		return true;
  	}catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
  }
}
?>