<?php

class admin_Model_Util {

    public static function getInsuranceClasses() {

        try {
            $db = Zend_Db_Table_Abstract::getDefaultAdapter();
            $result = array();
            $select = $db->select()
                    ->from('InsuranceClass', array('ID_InsuranceClass', 'd__InsuranceClass'));
            $stmt = $select->query();
            $rows = $stmt->fetchAll();

            if (count($rows) > 0){
                foreach ($rows as $r){

                    $result[$r['ID_InsuranceClass']] = $r['d__InsuranceClass'];
                }              
                return $result;
            }
            else
                return false;
        } catch (Zend_Db_Table_Exception $e) {
            throw new Exception($e->getMessage());
        }
    }

    public static function getInsuranceClassData($insuranceclass) {
        try {

            $db = Zend_Db_Table_Abstract::getDefaultAdapter();
            $result = array();
            $select = $db->select()
                    ->from('InsuranceClass', array('d__InsuranceClass'))
                    ->where('ID_InsuranceClass = ?', $insuranceclass);

            $stmt = $select->query();
            $row = $stmt->fetch();
            if ($row)
                return $row;
            else
                return false;
        } catch (Zend_Db_Table_Exception $exc) {
            echo $exc->getTraceAsString();
        }
    }

    public static function getCurrency() {
        try {
            $db = Zend_Db_Table_Abstract::getDefaultAdapter();
            $result = array();
            $select = $db->select()
                    ->from('Currency', array('ID_Currency', 'd__CurrencyName'))
                    ->order('d__Priority desc');
            $stmt = $select->query();
            $rows = $stmt->fetchAll();
            if (count($rows) > 0) {
                $result[] = '';
                foreach ($rows as $r) {
                    $result[$r['ID_Currency']] = $r['d__CurrencyName'];
                }
                return $result;
            }
            else
                return false;
        } catch (Zend_Db_Table_Exception $e) {
            throw new Exception($e->getMessage());
        }
    }

    public static function getBasisOfCalculation() {
        try {
            $db = Zend_Db_Table_Abstract::getDefaultAdapter();
            $result = array();
            $select = $db->select()
                    ->from('BasisOfCalculation', array('ID_BasisOfCalculation', 'd__BasisOfCalculation'))
                    ->order('d__BasisOfCalculation asc');

            $stmt = $select->query();
            $rows = $stmt->fetchAll();
            if (count($rows) > 0) {
                $result[] = '';
                foreach ($rows as $r) {
                    $result[$r['ID_BasisOfCalculation']] = $r['d__BasisOfCalculation'];
                }
                return $result;
            }
            else
                return false;
        } catch (Zend_Db_Table_Exception $e) {
            throw new Exception($e->getMessage());
        }
    }


}

?>
