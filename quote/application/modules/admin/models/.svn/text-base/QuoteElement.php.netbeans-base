<?php

class admin_Model_QuoteElement {
    
    private $id;
    private $countryId;
    private $insurerId;
    private $qutoeId;
    private $checkSum;
    
    public function setId($id){
        if(!is_int($id)){
            throw new Exception("Invalid argument exception in setId");
        }
        else{
            $this->id = $id;
        }
    }
    
    public function getQuoteId(){
        return $this->qutoeId;
    }
    
    public function setQuoteId($quoteid){
        if(!is_int($quoteid)){
            throw new Exception("Invalid argument exception in setQuoteId");
        }
        else{
            $this->qutoeId = $quoteid;
        }
    }
    
    public function getId(){
        return $this->id;
    }
    
    public function setCountryId($countryId){
        if(!is_int($countryId)){
            throw new Exception("Invalid argument exception in setCountry");
        }else{
            $this->countryId = $countryId;
        }
    }


    public function getCountryId(){
        return $this->countryId;
    }
    
    public function setInsurer($insurer){
        $this->insurerId = $insurer;
    }
    
    public function getInsurer(){
        return $this->insurerId;
    }
    
    public function setCheckSum($checkSum){
        $this->checkSum = $checkSum;
    }
    
    public function getCheckSum(){
        return $this->checkSum;
    }
    
    public function saveQuoteElement(admin_Model_QuoteElement $quoteElement){
        try{
            $quoteDao = new admin_Model_QuoteElementDao();
            return $quoteDao->addNewQuoteElement($this->getArray($quoteElement));
        }catch (Exception $e) {
                throw new Exception($e->getMessage());
        }
    }
    
    public function find($quoteId){
        try{
            $quoteElementDao = new admin_Model_QuoteElementDao();
            $quoteElementData =  $quoteElementDao->find($quoteId);
            $resultData = $this->getArrayForQuoteElement($quoteElementData);
            return $resultData;
            
        }catch (Exception $e) {
                throw new Exception($e->getMessage());
        }
    }
    public function getArray(admin_Model_QuoteElement $quoteElement){
        $quoteElementArray = array();
        $quoteElementArray['ID_Country'] = $quoteElement->getCountryId();
        $quoteElementArray['ID_Quote'] = $quoteElement->getQuoteId();
        $quoteElementArray['ID_QuoteInsurer'] = $quoteElement->getInsurer();
        $quoteElementArray['ID_QuoteInsurer_Checksum'] = $quoteElement->getCheckSum();
        return $quoteElementArray;
    }
    
    public function getArrayForQuoteElement($quoteElementData){
        $dataArray = array();
        $dataResultArray = array();
        foreach ($quoteElementData as $quoteData){
               $dataArray['Country'] =  $quoteData['d__CountryName'];
                $dataArray['applicable'] =  $quoteData['d__Applicable_Admitted'];
               $dataResultArray[] = $dataArray;
        }
        return $dataResultArray;
    }
            
}

?>
