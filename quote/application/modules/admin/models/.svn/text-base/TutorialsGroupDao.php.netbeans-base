<?php

class admin_Model_TutorialsGroupDao extends Zend_Db_Table_Abstract {

    protected $_name = 'TutorialsGroup';
    protected $_primary = 'ID_TutorialsGroup';

    public function save(array $groupDtil) {
       try {
            $result = $this->insert($groupDtil);
            return (integer) $result;
        } catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        } 
    }

    public function edit(array $groupDtil) {
        try {
            $where['ID_TutorialsGroup = ?'] = $groupDtil['ID_TutorialsGroup'];
            $result = $this->update($groupDtil, $where);
            return (integer) $result;
        } catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    }

    public function getGroups() {
        try {
            $select = $this->select();
            $select->where('d__IsActive = ?', 1);
            $stmt = $select->query();
            $rows = $stmt->fetchAll();
            if (count($rows) > 0)
                return $rows;
            else
                return false;
        } catch (Zend_Db_Table_Exception $e) {
            throw new Exception($e->getMessage());
        }
    }

    public function changeStatus($groupId, $status) {
        try {
            $data['d__IsActive'] = $status;
            $where['ID_Tutorials = ?'] = $groupId;
            $result = $this->update($data, $where);
            return (integer) $result;
        } catch (Zend_Db_Table_Exception $ex) {
            throw new Exception($ex->getMessage());
        }
    }

}

?>
